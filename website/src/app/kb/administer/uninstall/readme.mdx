import SupportOptions from "@/components/SupportOptions";
import { TabsGroup, TabsItem } from "@/components/DocsTabs";
import Alert from "@/components/DocsAlert";

# Uninstall Firezone Gateway

This guide covers how to uninstall the Firezone Gateway from your server(s).

{/* TODO: add Alert and link to client uninstall docs when that's complete */}

## Step 1: Stop the Gateway and remove relevant files

Use the appropriate instructions below to stop and remove the Gateway depending
on how it was installed:

<TabsGroup>
<TabsItem title="Docker" active>

1. Stop the container:

   ```bash
   docker stop firezone-gateway
   ```

1. Remove the container and its volumes:

   ```bash
   docker rm --volumes firezone-gateway
   ```

1. Remove the image:

   ```bash
   docker rmi ghcr.io/firezone/gateway:1
   ```

1. Remove the cache directory:

   ```bash
   sudo rm -rf /var/lib/firezone
   ```

</TabsItem>
<TabsItem title="systemd">

1. Stop the service:

   ```bash
   sudo systemctl stop firezone-gateway
   ```

1. Disable the service:

   ```bash
   sudo systemctl disable firezone-gateway
   ```

1. Remove all relevant files:

   ```bash
   sudo rm -rf /etc/systemd/system/firezone-gateway.service \
        /usr/local/bin/firezone-gateway \
        /usr/local/bin/firezone-gateway-init \
        /var/lib/firezone
   ```

</TabsItem>
</TabsGroup>

## Step 2 (optional): Delete the data from the admin portal

If you want to remove the Gateway's data from the admin portal as well, navigate
to the Site where the Gateway was running, click `(see all)` next to the
`Online Gateways` header, and then delete the offline Gateway corresponding to
the Gateway you just uninstalled.

<SupportOptions />
