"use strict";(self.webpackChunkfirezone_docs=self.webpackChunkfirezone_docs||[]).push([[6627],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||c[m]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},33351:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(87462),o=(n(67294),n(3905));const a={title:"SAML 2.0",sidebar_position:11},i=void 0,l={unversionedId:"authenticate/saml/README",id:"authenticate/saml/README",title:"SAML 2.0",description:"Firezone supports Single Sign-On (SSO) via SAML 2.0.",source:"@site/docs/authenticate/saml/README.mdx",sourceDirName:"authenticate/saml",slug:"/authenticate/saml/",permalink:"/authenticate/saml/",draft:!1,editUrl:"https://github.com/firezone/firezone/tree/master/docs/authenticate/saml/README.mdx",tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"SAML 2.0",sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"Zitadel",permalink:"/authenticate/oidc/zitadel"},next:{title:"Administer",permalink:"/administer/"}},s={},p=[{value:"Provider Support",id:"provider-support",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"General Instructions",id:"general-instructions",level:2}],u=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",t)},c=u("Tabs"),d=u("TabItem"),m={toc:p};function f(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Firezone supports Single Sign-On (SSO) via SAML 2.0."),(0,o.kt)("h2",{id:"provider-support"},"Provider Support"),(0,o.kt)("p",null,"In general, most identity providers that support SAML 2.0 should work with\nFirezone."),(0,o.kt)("p",null,"Occasionally, providers that don't implement the full SAML 2.0 standard or use\nuncommon configurations may be problematic. If this is the case, ",(0,o.kt)("a",{parentName:"p",href:"https://www.firezone.dev/contact/sales"},"contact us")," about a custom integration."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before using SAML 2.0 in Firezone, you'll first need to generate a set of\nprivate and public keys using the RSA or DSA algorithms along with an X.509\ncertificate that contains the public key. This can be generated with ",(0,o.kt)("inlineCode",{parentName:"p"},"openssl"),"\nusing the following one-liner:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -keyout saml.key -out saml.crt\n")),(0,o.kt)("p",null,"Now, configure your Firezone portal to use these:"),(0,o.kt)(c,{mdxType:"Tabs"},(0,o.kt)(d,{value:"docker",label:"Docker",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Set the ",(0,o.kt)("inlineCode",{parentName:"p"},"SAML_KEY_PATH")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"SAML_CERT_PATH")," environment variables to\nthe path containing your ",(0,o.kt)("inlineCode",{parentName:"p"},"saml.key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"saml.crt")," above. If using our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/firezone/firezone/blob/master/docker-compose.prod.yml"},"example\ndocker compose file"),",\nwhich includes a volume for mapping configuration,\nsave these files to ",(0,o.kt)("inlineCode",{parentName:"p"},"/data/firezone/")," on the Docker host and set the\n",(0,o.kt)("inlineCode",{parentName:"p"},"SAML_KEY_PATH=/var/firezone/saml.key")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"SAML_CERT_PATH=/var/firezone/saml.crt")," environment variables for the Firezone\ncontainer.")),(0,o.kt)(d,{value:"omnibus",label:"Omnibus",mdxType:"TabItem"},(0,o.kt)("p",null,"Set the following attributes in your ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/firezone/firezone.rb"),"\nconfiguration file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ruby"},"default['firezone']['authentication']['saml']['key'] = '/path/to/your/saml.key'\ndefault['firezone']['authentication']['saml']['cert'] = '/path/to/your/saml.crt'\n")),(0,o.kt)("p",null,"and run ",(0,o.kt)("inlineCode",{parentName:"p"},"firezone-ctl reconfigure")," to pick up the changes."))),(0,o.kt)("h2",{id:"general-instructions"},"General Instructions"),(0,o.kt)("p",null,"Once you've configured Firezone with an X.509 certificate and corresponding\nprivate key as shown above, you'll need to get the SAML Metadata XML document\nfrom your identity provider."))}f.isMDXComponent=!0}}]);