"use strict";(self.webpackChunkfirezone_docs=self.webpackChunkfirezone_docs||[]).push([[8349],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=u(n),f=i,g=d["".concat(l,".").concat(f)]||d[f]||c[f]||o;return n?r.createElement(g,s(s({ref:t},p),{},{components:n})):r.createElement(g,s({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=f;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a[d]="string"==typeof e?e:i,s[1]=a;for(var u=2;u<o;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},2583:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const o={title:"Split Tunnel VPN",sidebar_position:1,description:"Configure Firezone for split tunneling. Route some network traffic from end users through the encrypted WireGuard\xae tunnel."},s="Set up IP-based split tunneling with Firezone",a={unversionedId:"user-guides/use-cases/split-tunnel",id:"user-guides/use-cases/split-tunnel",title:"Split Tunnel VPN",description:"Configure Firezone for split tunneling. Route some network traffic from end users through the encrypted WireGuard\xae tunnel.",source:"@site/docs/user-guides/use-cases/split-tunnel.mdx",sourceDirName:"user-guides/use-cases",slug:"/user-guides/use-cases/split-tunnel",permalink:"/docs/user-guides/use-cases/split-tunnel",draft:!1,editUrl:"https://github.com/firezone/firezone/tree/master/www/docs/docs/user-guides/use-cases/split-tunnel.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Split Tunnel VPN",sidebar_position:1,description:"Configure Firezone for split tunneling. Route some network traffic from end users through the encrypted WireGuard\xae tunnel."},sidebar:"tutorialSidebar",previous:{title:"Common Use Cases",permalink:"/docs/user-guides/use-cases/"},next:{title:"Reverse Tunnel",permalink:"/docs/user-guides/use-cases/reverse-tunnel"}},l={},u=[{value:"Step 1: Set AllowedIPs",id:"step-1-set-allowedips",level:2},{value:"Step 2 (optional): Set the DNS server(s)",id:"step-2-optional-set-the-dns-servers",level:2},{value:"Step 3: Regenerate the device configurations",id:"step-3-regenerate-the-device-configurations",level:2}],p={toc:u},d="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"set-up-ip-based-split-tunneling-with-firezone"},"Set up IP-based split tunneling with Firezone"),(0,i.kt)("p",null,"This guide will describe the steps required to enable split tunneling with\nWireGuard using Firezone so only traffic to defined IP ranges will be routed\nthrough the VPN."),(0,i.kt)("p",null,"Firezone sets the ",(0,i.kt)("inlineCode",{parentName:"p"},"Allowed IPs")," field so traffic destined for\nspecific IPs are encrypted and routed through the gateway."),(0,i.kt)("h2",{id:"step-1-set-allowedips"},"Step 1: Set AllowedIPs"),(0,i.kt)("p",null,"AllowedIPs can be set globally on the ",(0,i.kt)("inlineCode",{parentName:"p"},"/settings/default")," page or individually\nfor each device during creation. Changes will only apply to new WireGuard\ntunnel configurations generated by Firezone."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/52545545/154814549-bb686ffe-ea82-4af8-a2a4-5e0b4013dec7.png",alt:"set split tunneling defaults"})),(0,i.kt)("p",null,"Some examples of values in this field are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"0.0.0.0/0, ::/0")," - all network traffic will be routed to the VPN server."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"192.0.2.3/32")," - only traffic to a single IP address\nwill be routed to the VPN server."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"3.5.140.0/22")," - only traffic to IPs in the ",(0,i.kt)("inlineCode",{parentName:"li"},"3.5.140.1 - 3.5.143.254")," range\nwill be routed to the VPN server.\nIn this example, the CIDR range for the ",(0,i.kt)("inlineCode",{parentName:"li"},"ap-northeast-2")," AWS region was used.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"When deciding where to route a packet, Firezone chooses the egress\ninterface corresponding to the most specific route first.")),(0,i.kt)("h2",{id:"step-2-optional-set-the-dns-servers"},"Step 2 (optional): Set the DNS server(s)"),(0,i.kt)("p",null,"You can define the DNS server(s) used by devices when the WireGuard tunnel\nis active. By default, it uses Cloudflare's DNS servers (",(0,i.kt)("inlineCode",{parentName:"p"},"1.1.1.1, 1.0.0.1"),").\nVisit the ",(0,i.kt)("inlineCode",{parentName:"p"},"/settings/default")," page to override this value."),(0,i.kt)("p",null,"For split tunneling, this may be desired if you run a DNS server that\nresolves internal hosts to private IPs reachable via Firezone."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If you wish to resolve DNS queries\nover the encrypted VPN tunnel (recommended), ensure the DNS IPs are included in ",(0,i.kt)("inlineCode",{parentName:"p"},"AllowedIPs"),".")),(0,i.kt)("h2",{id:"step-3-regenerate-the-device-configurations"},"Step 3: Regenerate the device configurations"),(0,i.kt)("p",null,"Changes made to global settings in the ",(0,i.kt)("strong",{parentName:"p"},"Defaults")," tab are only applied to\nfuture device configurations generated by Firezone."),(0,i.kt)("p",null,"Users need to regenerate device configurations to update existing devices\nfor the updated configuration changes to ",(0,i.kt)("inlineCode",{parentName:"p"},"AllowedIPs"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"DNS"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"PersistentKeepalive"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MTU"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"Endpoint"),"."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/user-guides/add-devices/"},"add device")," for instructions."))}c.isMDXComponent=!0}}]);