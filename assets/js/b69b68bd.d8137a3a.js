"use strict";(self.webpackChunkfirezone_docs=self.webpackChunkfirezone_docs||[]).push([[4961],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=u(r),d=o,f=m["".concat(l,".").concat(d)]||m[d]||p[d]||i;return r?n.createElement(f,a(a({ref:t},c),{},{components:r})):n.createElement(f,a({ref:t},c))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},46649:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var n=r(87462),o=(r(67294),r(3905));const i={title:"Migrate to Docker",sidebar_position:2},a=void 0,s={unversionedId:"administer/migrate",id:"administer/migrate",title:"Migrate to Docker",description:"Chef Infra Client, the configuration system Chef Omnibus relies on, has been",source:"@site/docs/administer/migrate.mdx",sourceDirName:"administer",slug:"/administer/migrate",permalink:"/administer/migrate",draft:!1,editUrl:"https://github.com/firezone/firezone/tree/master/docs/docs/administer/migrate.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Migrate to Docker",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Administer",permalink:"/administer/"},next:{title:"Upgrade",permalink:"/administer/upgrade"}},l={},u=[{value:"Steps to Migrate",id:"steps-to-migrate",level:2},{value:"Rolling Back",id:"rolling-back",level:2},{value:"Get Help",id:"get-help",level:2}],c={toc:u};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Chef Infra Client, the configuration system Chef Omnibus relies on, has been\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.chef.io/versions/#supported-commercial-distributions"},"scheduled for End-of-Life in 2024"),".\nAs such, Omnibus-based deployments\nwill be deprecated in a future version of Firezone."),(0,o.kt)("p",null,"Follow this guide to migrate from an Omnibus-based deployment to a Docker-based\ndeployment. In most cases this can be done with minimal downtime and without\nrequiring you to regenerate WireGuard configurations for each device."),(0,o.kt)("p",null,"Estimated time to complete: ",(0,o.kt)("strong",{parentName:"p"},"2 hours"),"."),(0,o.kt)("h2",{id:"steps-to-migrate"},"Steps to Migrate"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Back up")," your server. This ensures you have a working state to roll back to\nin case anything goes wrong. At a ",(0,o.kt)("em",{parentName:"li"},"bare minimum")," you'll want to back up the\n",(0,o.kt)("a",{parentName:"li",href:"../reference/file-and-directory-locations"},"file and directories Firezone uses\n"),", but we recommend taking a full\nsnapshot if possible."),(0,o.kt)("li",{parentName:"ol"},"Ensure you're running the latest version of Firezone. See our ",(0,o.kt)("a",{parentName:"li",href:"upgrade"},"upgrade guide\n")," if not."),(0,o.kt)("li",{parentName:"ol"},"Install the latest version of ",(0,o.kt)("a",{parentName:"li",href:"https://docs.docker.com/engine/install/"},(0,o.kt)("strong",{parentName:"a"},"Docker"))," and ",(0,o.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install/linux/#install-compose"},"Docker Compose\n"),"\nfor your OS. ",(0,o.kt)("strong",{parentName:"li"},"Docker Compose version 2 or higher is required"),".\nWe recommend using Docker Server for Linux. Docker\nDesktop will work too, but is not preferred for production use cases at this time\nbecause it rewrites packets under some conditions and may cause unexpected\nissues with Firezone."),(0,o.kt)("li",{parentName:"ol"},"Download and run the migration script:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bash <(curl -fsSL https://github.com/firezone/firezone/raw/master/scripts/docker_migrate.sh)\n")),(0,o.kt)("p",null,"This will ask you a few questions, then attempt to migrate your installation to\nDocker. If all goes well, your Firezone instance should be running with Docker, data intact."),(0,o.kt)("h2",{id:"rolling-back"},"Rolling Back"),(0,o.kt)("p",null,"If anything goes wrong, you can abort the migration by simply bringing the Docker\nservices down and the Omnibus ones back up:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down\nsudo firezone-ctl start\n")),(0,o.kt)("p",null,"If you've found a bug, please ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/firezone/firezone/issues"},"open a GitHub issue")," with the error output and\nany steps needed to reproduce."),(0,o.kt)("h2",{id:"get-help"},"Get Help"),(0,o.kt)("p",null,"If you need help migrating from Omnibus to Docker, check our community\nsupport options:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://discourse.firez.one/"},"Discussion Forums"),": Ask questions, report\nbugs, and suggest features."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://join.slack.com/t/firezone-users/shared_invite/zt-111043zus-j1lP_jP5ohv52FhAayzT6w"},"Public Slack Group"),":\nJoin live discussions, meet other users, and get to know the contributors.")),(0,o.kt)("p",null,"If you'd like dedicated support migrating your installation from Omnibus\nto Docker, consider ",(0,o.kt)("a",{parentName:"p",href:"https://firezone.dev/contact/sales"},"contacting us about our paid support plan\n"),"."))}p.isMDXComponent=!0}}]);