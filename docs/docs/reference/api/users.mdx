---
title: Users
sidebar_position: 2
toc_max_heading_level: 4
---


This endpoint allows you to provision Users.

## Auto-Create Users from OpenID or SAML providers

You can set Configuration option `auto_create_users` to `true` to automatically create users
from OpenID or SAML providers. Use it with care as anyone with access to the provider will be
able to log-in to Firezone.

If `auto_create_users` is `false`, then you need to provision users with `password` attribute,
otherwise they will have no means to log in.

## API Documentation
### List All Users [`GET /v0/users`]



#### Example
```bash
$ curl -i \
  -X GET "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": [
    {
      "disabled_at": null,
      "email": "test-1287@test",
      "id": "cb8e9a14-d80f-4d72-98c7-310ab065d549",
      "inserted_at": "2023-01-13T02:57:22.634898Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-01-13T02:57:22.634898Z"
    },
    {
      "disabled_at": null,
      "email": "test-1157@test",
      "id": "d6d09e0f-48a4-41d5-a179-9ccdb102c0c1",
      "inserted_at": "2023-01-13T02:57:22.638434Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-01-13T02:57:22.638434Z"
    },
    {
      "disabled_at": null,
      "email": "test-298@test",
      "id": "0193173e-7126-4726-b221-93b82c506e33",
      "inserted_at": "2023-01-13T02:57:22.640582Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-01-13T02:57:22.640582Z"
    },
    {
      "disabled_at": null,
      "email": "test-330@test",
      "id": "f451204b-27a2-4821-bce3-7209cb6ae433",
      "inserted_at": "2023-01-13T02:57:22.642916Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-01-13T02:57:22.642916Z"
    }
  ]
}
```
### Create a User [`POST /v0/users`]


Allows to create a new User.

This endpoint is useful in two cases:

  1. When "Password Authentication" is enabled (which is discouraged) it allows to pre-provision users with their passwords;
  2. When "Auto-Create Users" is disabled it allows to pre-provision users with their emails (there is no need to set a password for them),
  effectively whitelisting who can login using OpenID or SAML provider.

If "Auto-Create Users" is enabled there is no need to pre-create users, they will be created automatically
when they log in for the first time using OpenID or SAML provider.

#### User Attributes

| Attribute | Type | Required | Description |
| --------- | ---- | -------- | ----------- |
| `role` | `admin` or `unprivileged` (default) | No | User role. |
| `email` | `string` | Yes | Email which will be used to identify the user. |
| `password` | `string` | No | A password that can be used for login-password authentication. |
| `password_confirmation` | `string` | -> | Is required when the `password` is set. |

#### Example
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "password": "test1234test",
    "password_confirmation": "test1234test",
    "role": "unprivileged"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/d71bbd05-545f-4bdd-98b0-dcb34fd8c7c3

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "d71bbd05-545f-4bdd-98b0-dcb34fd8c7c3",
    "inserted_at": "2023-01-13T02:57:22.538713Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-01-13T02:57:22.538713Z"
  }
}
```
#### Provision an unprivileged OpenID User
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "role": "unprivileged"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/f589c9e1-0243-402e-9df9-8d5608ed2628

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "f589c9e1-0243-402e-9df9-8d5608ed2628",
    "inserted_at": "2023-01-13T02:57:22.424554Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-01-13T02:57:22.424554Z"
  }
}
```
#### Provision an admin OpenID User
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "role": "admin"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/be59dfb5-6283-4a11-a8dc-b5e4e87ac620

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "be59dfb5-6283-4a11-a8dc-b5e4e87ac620",
    "inserted_at": "2023-01-13T02:57:22.472756Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "admin",
    "updated_at": "2023-01-13T02:57:22.472756Z"
  }
}
```
#### Error due to invalid parameters
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "test@test.com",
    "password": "test1234"
  }
}'
EOF

HTTP/1.1 422
Content-Type: application/json; charset=utf-8

{
  "errors": {
    "password": [
      "should be at least 12 character(s)",
      "does not match password confirmation."
    ]
  }
}
```
### GET /v0/users/{id}



#### An email can be used instead of ID.
**URI Parameters:**

  - `id`: `test-1763@test`
```bash
$ curl -i \
  -X GET "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-1763@test",
    "id": "d95533a6-f87e-4546-9f77-4fbe44785687",
    "inserted_at": "2023-01-13T02:57:22.400755Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "admin",
    "updated_at": "2023-01-13T02:57:22.400755Z"
  }
}
```
### Update a User [`PATCH /v0/users/{id}`]


For details please see [Create a User](#create-a-user-post-v0users) section.

#### Update by email
**URI Parameters:**

  - `id`: `test-1189@test`
```bash
$ curl -i \
  -X PUT "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {}
}'
EOF

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-1189@test",
    "id": "1cd29756-b0db-4325-932b-9af52bff4463",
    "inserted_at": "2023-01-13T02:57:22.659218Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-01-13T02:57:22.659218Z"
  }
}
```
#### Update by ID
**URI Parameters:**

  - `id`: `97611e18-de3b-4aa5-9555-de9aed58aa3b`
```bash
$ curl -i \
  -X PUT "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {}
}'
EOF

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-997@test",
    "id": "97611e18-de3b-4aa5-9555-de9aed58aa3b",
    "inserted_at": "2023-01-13T02:57:22.617150Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-01-13T02:57:22.617150Z"
  }
}
```
### DELETE /v0/users/{id}



#### Example
**URI Parameters:**

  - `id`: `036e2422-e093-47be-b7f2-b8d1eceb43e6`
```bash
$ curl -i \
  -X DELETE "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 204
```
#### An email can be used instead of ID.
**URI Parameters:**

  - `id`: `test-2210@test`
```bash
$ curl -i \
  -X DELETE "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 204
```
