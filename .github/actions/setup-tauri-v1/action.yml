# From https://tauri.app/v1/guides/getting-started/prerequisites
name: "Setup Tauri"
description: "Sets up the dependencies for building and testing Tauri apps"
inputs:
  runtime:
    description: "Whether to also set up runtime dependencies"
    required: false
    default: false
runs:
  using: "composite"
  steps:
    - name: Apt-get update
      run: sudo apt-get update
      shell: bash
    - name: Install Tauri build deps
      run: sudo apt-get --yes install build-essential libwebkit2gtk-4.0-dev libssl-dev libgtk-3-dev libayatana-appindicator3-dev librsvg2-dev
      shell: bash
    - name: Install gnome-keyring
      run: sudo apt-get --yes install gnome-keyring
      shell: bash
      # This is only needed if we'll launch the Tauri GUI, so it's redundant for clippy / test
      # This is what the Tauri CI tests use
      # <https://github.com/tauri-apps/tauri/blob/3fb414b61ad7cfce67751230826fddfb39effec5/.github/workflows/bench.yml#L74>
    - name: Install Tauri runtime deps
      if: ${{ inputs.runtime == 'true' }}
      run: sudo apt-get --yes install at-spi2-core xvfb
      shell: bash
