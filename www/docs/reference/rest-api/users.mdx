---
title: Users
sidebar_position: 2
toc_max_heading_level: 4
---


This endpoint allows an administrator to manage Users.

## Auto-Create Users from OpenID or SAML providers

You can set Configuration option `auto_create_users` to `true` to automatically create users
from OpenID or SAML providers. Use it with care as anyone with access to the provider will be
able to log-in to Firezone.

If `auto_create_users` is `false`, then you need to provision users with `password` attribute,
otherwise they will have no means to log in.

## Disabling users

Even though API returns `disabled_at` attribute, currently, it's not possible to disable users via API,
since this field is only for internal use by automatic user disabling mechanism on OIDC/SAML errors.

## API Documentation
### List all Users [`GET /v0/users`]



#### Example
```bash
$ curl -i \
  -X GET "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": [
    {
      "disabled_at": null,
      "email": "test-4578@test",
      "id": "61598ea6-acaa-4308-b12f-2da95b312387",
      "inserted_at": "2023-02-18T18:55:50.972304Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-02-18T18:55:50.972304Z"
    },
    {
      "disabled_at": null,
      "email": "test-2280@test",
      "id": "9cde3f7f-db18-49b7-84de-b88675c6ab73",
      "inserted_at": "2023-02-18T18:55:50.973729Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-02-18T18:55:50.973729Z"
    },
    {
      "disabled_at": null,
      "email": "test-2312@test",
      "id": "820eb7eb-354e-4f6f-8fdc-acbab6e35e7b",
      "inserted_at": "2023-02-18T18:55:50.975468Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-02-18T18:55:50.975468Z"
    },
    {
      "disabled_at": null,
      "email": "test-2344@test",
      "id": "a2b12d92-9498-4b88-b2fc-215b612714c4",
      "inserted_at": "2023-02-18T18:55:50.976834Z",
      "last_signed_in_at": null,
      "last_signed_in_method": null,
      "role": "admin",
      "updated_at": "2023-02-18T18:55:50.976834Z"
    }
  ]
}
```
### Create a User [`POST /v0/users`]


Create a new User.

This endpoint is useful in two cases:

  1. When [Local Authentication](/authenticate/local-auth/) is enabled (discouraged in
    production deployments), it allows an administrator to provision users with their passwords;
  2. When `auto_create_users` in the associated OpenID or SAML configuration is disabled,
    it allows an administrator to provision users with their emails beforehand, effectively
    whitelisting specific users for authentication.

If `auto_create_users` is `true` in the associated OpenID or SAML configuration, there is no need
to provision users; they will be created automatically when they log in for the first time using
the associated OpenID or SAML provider.

#### User Attributes

| Attribute | Type | Required | Description |
| --------- | ---- | -------- | ----------- |
| `role` | `admin` or `unprivileged` (default) | No | User role. |
| `email` | `string` | Yes | Email which will be used to identify the user. |
| `password` | `string` | No | A password that can be used for login-password authentication. |
| `password_confirmation` | `string` | -> | Is required when the `password` is set. |

#### Example
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "password": "test1234test",
    "password_confirmation": "test1234test",
    "role": "unprivileged"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/1c4476d8-b3ed-4e2a-a327-43d8a8145902

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "1c4476d8-b3ed-4e2a-a327-43d8a8145902",
    "inserted_at": "2023-02-18T18:55:51.312737Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-02-18T18:55:51.312737Z"
  }
}
```
#### Provision an unprivileged OpenID User
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "role": "unprivileged"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/b0c662db-fe4b-4be6-8cba-b96e6de85d3c

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "b0c662db-fe4b-4be6-8cba-b96e6de85d3c",
    "inserted_at": "2023-02-18T18:55:51.143811Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-02-18T18:55:51.143811Z"
  }
}
```
#### Provision an admin OpenID User
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "new-user@test",
    "role": "admin"
  }
}'
EOF

HTTP/1.1 201
Content-Type: application/json; charset=utf-8
Location: /v0/users/859b1c5f-d25e-4e15-bdba-1cb90de3b4f1

{
  "data": {
    "disabled_at": null,
    "email": "new-user@test",
    "id": "859b1c5f-d25e-4e15-bdba-1cb90de3b4f1",
    "inserted_at": "2023-02-18T18:55:51.071112Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "admin",
    "updated_at": "2023-02-18T18:55:51.071112Z"
  }
}
```
#### Error due to invalid parameters
```bash
$ curl -i \
  -X POST "https://{firezone_host}/v0/users" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {
    "email": "test@test.com",
    "password": "test1234"
  }
}'
EOF

HTTP/1.1 422
Content-Type: application/json; charset=utf-8

{
  "errors": {
    "password": [
      "should be at least 12 character(s)"
    ],
    "password_confirmation": [
      "can't be blank"
    ]
  }
}
```
### GET /v0/users/{id}



#### An email can be used instead of ID.
**URI Parameters:**

  - `id`: `test-2757@test`
```bash
$ curl -i \
  -X GET "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-2757@test",
    "id": "a6150251-3d5d-4eef-b918-feefbb18e986",
    "inserted_at": "2023-02-18T18:55:51.102821Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "admin",
    "updated_at": "2023-02-18T18:55:51.102821Z"
  }
}
```
### Update a User [`PATCH /v0/users/{id}`]


For details please see [Create a User](#create-a-user-post-v0users) section.

#### Update by email
**URI Parameters:**

  - `id`: `test-4452@test`
```bash
$ curl -i \
  -X PUT "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {}
}'
EOF

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-4452@test",
    "id": "18fcbb10-af71-45fd-841e-8419f5d48a76",
    "inserted_at": "2023-02-18T18:55:51.316849Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-02-18T18:55:51.316849Z"
  }
}
```
#### Update by ID
**URI Parameters:**

  - `id`: `43838f3c-47e6-4368-851b-4004d389d0e2`
```bash
$ curl -i \
  -X PUT "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \
  --data-binary @- << EOF
{
  "user": {}
}'
EOF

HTTP/1.1 200
Content-Type: application/json; charset=utf-8

{
  "data": {
    "disabled_at": null,
    "email": "test-5026@test",
    "id": "43838f3c-47e6-4368-851b-4004d389d0e2",
    "inserted_at": "2023-02-18T18:55:51.074271Z",
    "last_signed_in_at": null,
    "last_signed_in_method": null,
    "role": "unprivileged",
    "updated_at": "2023-02-18T18:55:51.074271Z"
  }
}
```
### DELETE /v0/users/{id}



#### Example
**URI Parameters:**

  - `id`: `65871243-ac8a-4c46-97b7-01e710d6e05e`
```bash
$ curl -i \
  -X DELETE "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 204
Content-Type: application/json; charset=utf-8
```
#### An email can be used instead of ID.
**URI Parameters:**

  - `id`: `test-4866@test`
```bash
$ curl -i \
  -X DELETE "https://{firezone_host}/v0/users/{id}" \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer {api_token}' \

HTTP/1.1 204
Content-Type: application/json; charset=utf-8
```
